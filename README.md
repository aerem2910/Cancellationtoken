
Данная программа представляет собой консольное приложение для обмена сообщениями между клиентом и сервером посредством UDP-протокола. Программа состоит из двух частей: клиента и сервера.

1. **Main в Program.cs:**
   - Создается объект `CancellationTokenSource` (`cts`), который позволяет управлять отменой операций.
   - Если в командной строке есть аргументы, вызывается метод `Client.SendMsg` с передачей аргумента и токена отмены.
   - В противном случае вызывается метод `Server.AcceptMsg` с передачей токена отмены.
   - В конце метода вызывается `cts.Cancel()`, чтобы предоставить сигнал отмены.

2. **SendMsg в Client.cs:**
   - Создается `UdpClient` для отправки и приема сообщений.
   - Запускается бесконечный цикл ввода сообщений с консоли.
   - Введенное сообщение сериализуется в JSON, конвертируется в байты и отправляется на сервер с использованием `SendAsync`.
   - Запускается задача на прием сообщения с сервера с использованием `ReceiveAsync`.
   - Используется `Task.WhenAny`, чтобы дождаться выполнения любой из задач (ввода или приема).
   - Если введено "Exit", цикл завершается.
   - Задача на прием сообщения завершится, и полученный ответ выводится в консоль.
   - В конце метода ресурсы закрываются.

3. **AcceptMsg в Server.cs:**
   - Создается `UdpClient` для приема и отправки сообщений.
   - Запускается задача на ожидание нажатия клавиши с использованием `Task.Run`.
   - В бесконечном цикле ожидается прием сообщения с использованием `ReceiveAsync`.
   - Полученное сообщение десериализуется из JSON, выводится в консоль.
   - Если в сообщении содержится "Exit", вызывается метод `RequestExit`, который инициирует отмену.
   - Иначе, создается и отправляется ответное сообщение.
   - Ресурсы закрываются при завершении.

4. **RequestExit в Server.cs:**
   - Проверяется, не было ли уже запрошено завершение.
   - Если нет, вызывается `cts.Cancel()` для отмены операций.

